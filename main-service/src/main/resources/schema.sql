DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS categories;


CREATE TABLE IF NOT EXISTS users (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL
);

CREATE TABLE IF NOT EXISTS categories (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255) UNIQUE NOT NULL
);

CREATE TABLE IF NOT EXISTS events (
--
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title VARCHAR(100) NOT NULL,
    annotation VARCHAR(1000) NOT NULL,
    description VARCHAR(5000) NOT NULL,
    lat REAL NOT NULL,
    lon REAL NOT NULL,
    eventDate TIMESTAMP NOT NULL,
    paid BOOLEAN DEFAULT FALSE,
--
    category_id BIGINT REFERENCES categories(id),
    requestModeration BOOLEAN DEFAULT TRUE,
    participantLimit INTEGER DEFAULT 0,
    confirmedRequests INTEGER DEFAULT 0,
    views BIGINT DEFAULT 0,
--
    initiator BIGINT REFERENCES users(id),
    createOn TIMESTAMP NOT NULL,
    publishedOn TIMESTAMP NOT NULL,
    state VARCHAR(64)
);